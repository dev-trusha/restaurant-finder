<div class="row">
    <div class="col-md-8 mx-auto">
        <div class="card">
            <div class="card-header">
                <h2>✏️ Edit Restaurant: {{restaurant.name}}</h2>
            </div>
            <div class="card-body">
                <form method="POST" action="/restaurants/{{restaurant._id}}/update">
                    <div class="row g-3">
                        <!-- Basic Information -->
                        <div class="col-12">
                            <h5 class="border-bottom pb-2">Basic Information</h5>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="name" class="form-label">Restaurant Name *</label>
                            <input type="text" class="form-control {{#if errors.name}}is-invalid{{/if}}" 
                                   id="name" name="name" value="{{restaurant.name}}" required>
                            {{#if errors.name}}
                            <div class="invalid-feedback">{{errors.name}}</div>
                            {{/if}}
                        </div>
                        
                        <div class="col-md-6">
                            <label for="rating" class="form-label">Rating (0-5)</label>
                            <input type="number" class="form-control {{#if errors.rating}}is-invalid{{/if}}" 
                                   id="rating" name="rating" value="{{restaurant.rating}}" min="0" max="5" step="0.1">
                            {{#if errors.rating}}
                            <div class="invalid-feedback">{{errors.rating}}</div>
                            {{/if}}
                        </div>

                        <!-- Address Information -->
                        <div class="col-12">
                            <h5 class="border-bottom pb-2 mt-4">Address</h5>
                        </div>
                        
                        <div class="col-12">
                            <label for="street" class="form-label">Street Address *</label>
                            <input type="text" class="form-control {{#if errors.address}}is-invalid{{/if}}" 
                                   id="street" name="address[street]" value="{{restaurant.address.street}}" required>
                            {{#if errors.address}}
                            <div class="invalid-feedback">{{errors.address}}</div>
                            {{/if}}
                        </div>
                        
                        <div class="col-md-4">
                            <label for="city" class="form-label">City *</label>
                            <input type="text" class="form-control {{#if errors.address}}is-invalid{{/if}}" 
                                   id="city" name="address[city]" value="{{restaurant.address.city}}" required>
                        </div>
                        
                        <div class="col-md-4">
                            <label for="country" class="form-label">Country *</label>
                            <input type="text" class="form-control {{#if errors.address}}is-invalid{{/if}}" 
                                   id="country" name="address[country]" value="{{restaurant.address.country}}" required>
                        </div>
                        
                        <div class="col-md-4">
                            <label for="location" class="form-label">Location Display *</label>
                            <input type="text" class="form-control {{#if errors.location}}is-invalid{{/if}}" 
                                   id="location" name="location" value="{{restaurant.location}}" required>
                            {{#if errors.location}}
                            <div class="invalid-feedback">{{errors.location}}</div>
                            {{/if}}
                        </div>

                        <!-- Cuisines and Amenities -->
                        <div class="col-12">
                            <h5 class="border-bottom pb-2 mt-4">Cuisines & Features</h5>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="cuisines" class="form-label">Cuisines * (comma separated)</label>
                            <input type="text" class="form-control {{#if errors.cuisines}}is-invalid{{/if}}" 
                                   id="cuisines" name="cuisines" value="{{join restaurant.cuisines ', '}}" 
                                   placeholder="e.g., Italian, French, Japanese" required>
                            {{#if errors.cuisines}}
                            <div class="invalid-feedback">{{errors.cuisines}}</div>
                            {{/if}}
                            <div class="form-text">Separate multiple cuisines with commas</div>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="amenities" class="form-label">Amenities (comma separated)</label>
                            <input type="text" class="form-control" id="amenities" name="amenities" 
                                   value="{{join restaurant.amenities ', '}}" placeholder="e.g., WiFi, Parking, Outdoor Seating">
                        </div>
                        
                        <div class="col-md-6">
                            <div class="form-check mt-3">
                                <input class="form-check-input" type="checkbox" id="hasWifi" name="hasWifi" 
                                       {{#if restaurant.hasWifi}}checked{{/if}}>
                                <label class="form-check-label" for="hasWifi">
                                    WiFi Available
                                </label>
                            </div>
                        </div>

                        <!-- Location Coordinates -->
                        <div class="col-12">
                            <h5 class="border-bottom pb-2 mt-4">Geographic Coordinates</h5>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="lat" class="form-label">Latitude *</label>
                            <input type="number" class="form-control {{#if errors.geo}}is-invalid{{/if}}" 
                                   id="lat" name="geo[lat]" value="{{restaurant.geo.lat}}" 
                                   step="any" min="-90" max="90" required>
                            {{#if errors.geo}}
                            <div class="invalid-feedback">{{errors.geo}}</div>
                            {{/if}}
                        </div>
                        
                        <div class="col-md-6">
                            <label for="lng" class="form-label">Longitude *</label>
                            <input type="number" class="form-control {{#if errors.geo}}is-invalid{{/if}}" 
                                   id="lng" name="geo[lng]" value="{{restaurant.geo.lng}}" 
                                   step="any" min="-180" max="180" required>
                        </div>

                        <!-- Pricing -->
                        <div class="col-12">
                            <h5 class="border-bottom pb-2 mt-4">Pricing Information</h5>
                        </div>
                        
                        <div class="col-md-4">
                            <label for="priceRange" class="form-label">Price Range *</label>
                            <select class="form-select {{#if errors.priceRange}}is-invalid{{/if}}" 
                                    id="priceRange" name="priceRange" required>
                                <option value="$" {{#if (eq restaurant.priceRange "$")}}selected{{/if}}>$ - Budget</option>
                                <option value="$$" {{#if (eq restaurant.priceRange "$$")}}selected{{/if}}>$$ - Moderate</option>
                                <option value="$$$" {{#if (eq restaurant.priceRange "$$$")}}selected{{/if}}>$$$ - Expensive</option>
                                <option value="$$$$" {{#if (eq restaurant.priceRange "$$$$")}}selected{{/if}}>$$$$ - Very Expensive</option>
                            </select>
                            {{#if errors.priceRange}}
                            <div class="invalid-feedback">{{errors.priceRange}}</div>
                            {{/if}}
                        </div>
                        
                        <div class="col-md-4">
                            <label for="averageCostForTwo" class="form-label">Average Cost for Two *</label>
                            <input type="number" class="form-control {{#if errors.averageCostForTwo}}is-invalid{{/if}}" 
                                   id="averageCostForTwo" name="averageCostForTwo" 
                                   value="{{restaurant.averageCostForTwo}}" min="0" required>
                            {{#if errors.averageCostForTwo}}
                            <div class="invalid-feedback">{{errors.averageCostForTwo}}</div>
                            {{/if}}
                        </div>
                        
                        <div class="col-md-4">
                            <label for="currency" class="form-label">Currency *</label>
                            <input type="text" class="form-control {{#if errors.currency}}is-invalid{{/if}}" 
                                   id="currency" name="currency" value="{{restaurant.currency}}" required>
                            {{#if errors.currency}}
                            <div class="invalid-feedback">{{errors.currency}}</div>
                            {{/if}}
                        </div>

                        <!-- Image -->
                        <div class="col-12">
                            <h5 class="border-bottom pb-2 mt-4">Restaurant Image</h5>
                        </div>
                        
                        <div class="col-12">
                            <label for="image" class="form-label">Image URL</label>
                            <input type="url" class="form-control {{#if errors.image}}is-invalid{{/if}}" 
                                   id="image" name="image" value="{{restaurant.image}}" 
                                   placeholder="https://picsum.photos/seed/testcafe/400/300">
                            {{#if errors.image}}
                            <div class="invalid-feedback">{{errors.image}}</div>
                            {{/if}}
                            <div class="form-text">
                                Leave empty to use default image
                            </div>
                            <!-- Image Preview -->
                            <div class="mt-2">
                                <small class="text-muted">Current Image:</small><br>
                                <img src="{{restaurant.image}}" 
                                     class="img-thumbnail mt-1" 
                                     style="max-width: 200px; max-height: 150px;"
                                     onerror="this.src='https://picsum.photos/400/300?food'">
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 d-flex gap-2">
                        <button type="submit" class="btn btn-primary">Update Restaurant</button>
                        <a href="/restaurants/{{restaurant._id}}" class="btn btn-outline-secondary">Cancel</a>
                        <a href="/restaurants/{{restaurant._id}}/delete" class="btn btn-outline-danger ms-auto" 
                           onclick="return confirm('Are you sure you want to delete this restaurant?')">
                            Delete Restaurant
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>